<div [formGroup]="form">

  <section class="ibFormArrayItem" *ngFor="let line of array.controls; let index = index">
    <ng-container *ngFor="let field of base.fields">
      <ng-container [ngSwitch]="field.role">
        <ib-dynamic-form-control *ngSwitchCase="'control'" class="ibFormRow" [base]="field"
          [form]="getGroupAt(index)"></ib-dynamic-form-control>
        <!-- <ib-dynamic-form-array *ngSwitchCase="'array'" class="ibFormRow" [base]="field" [form]="form"></ib-dynamic-form-array> -->
      </ng-container>
    </ng-container>
    <div class="ibFormRow ibFormActions">
      <button *ngIf="lines > 1" (click)="removeField(index)" [disabled]="array.disabled">-</button>
      <button *ngIf="lines - 1 === index" (click)="addField()" [disabled]="array.disabled">Add</button>
    </div>
  </section>

</div>