<form (ngSubmit)="handleSubmit()" [formGroup]="form" class="ibForm">

  <ng-container *ngFor="let field of fields">
    <ng-container [ngSwitch]="field.role">
      <ib-dynamic-form-control *ngSwitchCase="'control'" class="ibFormRow" [base]="field | asFormControl" [form]="form"></ib-dynamic-form-control>
      <ib-dynamic-form-array *ngSwitchCase="'array'" class="ibFormRow" [base]="field | asFormArray" [form]="form"></ib-dynamic-form-array>
    </ng-container>
  </ng-container>

  <div class="ibFormRow ibFormActions">
    <button type="submit" [disabled]="!form.valid">Save</button>
  </div>
</form>