import { Meta } from "@storybook/blocks";

<Meta title="What's new" />

# What's new

## Support for Material 3

Added support for the Material Design 3 version of Angular Material components.
Using this [schematic](https://github.com/angular/components/blob/main/src/material/schematics/ng-generate/m3-theme/README.md) you can now generate a theme
providing a single color, typically a brand color. Note that the primary color generated will most likely differ from the one provided since the the color palettes
are optimized to have enough contrast to be more accessible.

```
ng generate @angular/material:m3-theme
```

The `ui.theme()` mixin has been deprecated

```scss
/** ❌ Removed */
@include ui.theme($theme)
```

It must be replaced with the Angular Material `mat.all-component-themes()` mixin

```scss
@include mat.all-component-themes($theme);
```

And with one of the three new theme mixin available for `@inobeta/ui` components:

```scss
@use "@inobeta/ui" as ui;

@include ui.main-menu-theme(app-theme.$light-theme);
@include ui.table-theme(app-theme.$light-theme);
@include ui.toast-theme(app-theme.$light-theme);
```

> ⚠️ Include only the components that are beign actually used

### Upgrade to Material 3

[Official guide](https://material.angular.io/guide/material-2-theming#how-to-migrate-an-app-from-material-2-to-material-3)

1. Generate a new palette with the schematic mentioned above
2. Apply the palette within the `html` selector
3. Add `mat.color-variants-backwards-compatibility()` to support the `color` input available for some components (for example `mat-button`)

```scss
/** styles.scss */
@use "@angular/material" as mat;
@use "@inobeta/ui" as ui;
@use "/path/to/app-theme";

@include mat.core();

html {
  @include mat.all-component-themes(app-theme.$light-theme);

  @include mat.color-variants-backwards-compatibility(app-theme.$light-theme);

  /** Only include themes of components that are actually beign used */
  @include ui.main-menu-theme(app-theme.$light-theme);
  @include ui.table-theme(app-theme.$light-theme);
  @include ui.toast-theme(app-theme.$light-theme);

  /** The palette generated by the schematic also includes a dark theme */
  @media (prefers-color-scheme: dark) {
    @include mat.all-component-colors(app-theme.$dark-theme);

    @include mat.color-variants-backwards-compatibility(app-theme.$dark-theme);

    /** Use the *-color mixin for dark theme to avoid duplicates */
    @include ui.main-menu-color(app-theme.$dark-theme);
    @include ui.table-color(app-theme.$dark-theme);
    @include ui.toast-color(app-theme.$dark-theme);
  }
}
```
